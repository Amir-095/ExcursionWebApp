const translations = {
    'en': {
        'Успешно': 'Success',
        'Успешно!': 'Success!',
        'Ошибка': 'Error',
        'Ошибка!': 'Error!',
        'Неверное имя пользователя или пароль': 'Incorrect username or password',
        'Произошла ошибка при входе в систему': 'An error occurred while logging in',
        'Вы успешно зарегистрировались, вы можете войти в систему': 'You have successfully registered, you can log in',
        'Ошибка регистрации!': 'Registration error!',
        'Пожалуйста, проверьте введенные данные': 'Please check the entered data',
        'Пожалуйста, заполните все обязательные поля.': 'Please fill in all required fields.',
        'Произошла ошибка при регистрации': 'An error occurred during registration',
        'Выберите дату': 'Select a date',
        'Пожалуйста, выберите дату экскурсии.': 'Please select an excursion date.',
        'Ошибка проверки карты': 'Card validation error',
        'Номер карты некорректен. Пожалуйста, проверьте введённые данные.': 'Card number is incorrect. Please check the entered data.',
        'Срок действия карты некорректен. Используйте формат ММ/ГГ.': 'Card expiry date is incorrect. Use MM/YY format.',
        'Месяц окончания карты некорректен.': 'Card expiration month is incorrect.',
        'Срок действия карты истёк.': 'Card has expired.',
        'CVC-код некорректен.': 'CVC code is incorrect.',
        'Имя владельца карты некорректно.': 'Cardholder name is incorrect.',
        'Оплата прошла успешно. Бронирование выполнено.': 'Payment was successful. Booking completed.',
        'Оплата успешна': 'Payment successful',
        'Ошибка при обработке оплаты. Попробуйте ещё раз.': 'An error occurred while processing payment. Please try again.',
        'Не удалось получить сохранённую карту': 'Failed to retrieve saved card.',
        'Некорректная стоимость билетов. Попробуйте ещё раз.': 'Incorrect ticket price. Please try again.',
        'Данные экскурсии успешно сохранены!': 'Excursion data successfully saved!',
        'Ошибка сохранения экскурсии.': 'Error saving excursion.',
        'Экскурсия успешно обновлена!': 'Excursion successfully updated!',
        'Ошибка при обновлении экскурсии.': 'Error updating excursion.',
        'Экскурсия успешно удалена!': 'Excursion successfully deleted!',
        'Ошибка при удалении экскурсии.': 'Error deleting excursion.',
        'Сообщение успешно отправлено!': 'Message successfully sent!',
        'Ошибка при отправке сообщения.': 'Error sending message.',
        'Отзыв успешно добавлен!': 'Review successfully added!',
        'Ошибка при добавлении отзыва.': 'Error adding review.',
        'Отзыв успешно обновлен!': 'Review successfully updated!',
        'Ошибка при обновлении отзыва.': 'Error updating review.',
        'Отзыв успешно удалён': 'Review successfully deleted!',
        'Ошибка при удалении отзыва.': 'Error deleting review.',
        'Профиль успешно обновлен.': 'Profile successfully updated!',
        'Ошибка при обновлении профиля.': 'Error updating profile.',
        'Карта успешно удалена': 'Card successfully deleted!',
        'Ошибка при удалении карты.': 'Error deleting card.',
        'Пароли не совпадают': 'Passwords do not match.',
        'Этот email уже зарегистрирован': 'This email is already registered.',
        'Этот номер уже зарегистрирован': 'This phone number is already registered.',
        'Пользователь с таким именем уже существует': 'A user with this username already exists.',
        'Пользователь с таким email уже существует': 'A user with this email already exists.',
        'Пользователь с таким номером телефона уже существует': 'A user with this phone number already exists.',
        'Турагент успешно создан': 'Tour agent successfully created',
        'Ошибка при создании турагента.': 'Error creating tour agent.',
        'Данные турагента успешно обновлены': 'Tour agent data successfully updated',
        'Ошибка при обновлении турагента.': 'Error updating tour agent.',
        'Сетевая ошибка': 'Network error',
        'Не удалось связаться с сервером. Попробуйте ещё раз.': 'Could not contact the server. Please try again.',
        'Вы успешно вошли в систему': 'You have successfully logged in',
        'Отмена': 'Cancel',
        'Сохранить': 'Save',
        'Оценка:': 'Rating:'
    },
    'ru': {
        'Успешно!': 'Успешно!',
        'Успешно': 'Успешно',
        'Ошибка!': 'Ошибка!',
        'Ошибка': 'Ошибка',
        'Неверное имя пользователя или пароль': 'Неверное имя пользователя или пароль',
        'Произошла ошибка при входе в систему': 'Произошла ошибка при входе в систему',
        'Вы успешно зарегистрировались, вы можете войти в систему': 'Вы успешно зарегистрировались, вы можете войти в систему',
        'Ошибка регистрации!': 'Ошибка регистрации!',
        'Пожалуйста, проверьте введенные данные': 'Пожалуйста, проверьте введенные данные',
        'Пожалуйста, заполните все обязательные поля.': 'Пожалуйста, заполните все обязательные поля.',
        'Произошла ошибка при регистрации': 'Произошла ошибка при регистрации',
        'Выберите дату': 'Выберите дату',
        'Пожалуйста, выберите дату экскурсии.': 'Пожалуйста, выберите дату экскурсии.',
        'Ошибка проверки карты': 'Ошибка проверки карты',
        'Номер карты некорректен. Пожалуйста, проверьте введённые данные.': 'Номер карты некорректен. Пожалуйста, проверьте введённые данные.',
        'Срок действия карты некорректен. Используйте формат ММ/ГГ.': 'Срок действия карты некорректен. Используйте формат ММ/ГГ.',
        'Месяц окончания карты некорректен.': 'Месяц окончания карты некорректен.',
        'Срок действия карты истёк.': 'Срок действия карты истёк.',
        'CVC-код некорректен.': 'CVC-код некорректен.',
        'Имя владельца карты некорректно.': 'Имя владельца карты некорректно.',
        'Оплата прошла успешно. Бронирование выполнено.': 'Оплата прошла успешно. Бронирование выполнено.',
        'Оплата успешна': 'Оплата успешна',
        'Ошибка при обработке оплаты. Попробуйте ещё раз.': 'Ошибка при обработке оплаты. Попробуйте ещё раз.',
        'Не удалось получить сохранённую карту': 'Не удалось получить сохранённую карту',
        'Некорректная стоимость билетов. Попробуйте ещё раз.': 'Некорректная стоимость билетов. Попробуйте ещё раз.',
        'Данные экскурсии успешно сохранены!': 'Данные экскурсии успешно сохранены!',
        'Ошибка сохранения экскурсии.': 'Ошибка сохранения экскурсии.',
        'Экскурсия успешно обновлена!': 'Экскурсия успешно обновлена!',
        'Ошибка при обновлении экскурсии.': 'Ошибка при обновлении экскурсии.',
        'Экскурсия успешно удалена!': 'Экскурсия успешно удалена!',
        'Ошибка при удалении экскурсии.': 'Ошибка при удалении экскурсии.',
        'Сообщение успешно отправлено!': 'Сообщение успешно отправлено!',
        'Ошибка при отправке сообщения.': 'Ошибка при отправке сообщения.',
        'Отзыв успешно добавлен!': 'Отзыв успешно добавлен!',
        'Ошибка при добавлении отзыва.': 'Ошибка при добавлении отзыва.',
        'Отзыв успешно обновлен!': 'Отзыв успешно обновлен!',
        'Ошибка при обновлении отзыва.': 'Ошибка при обновлении отзыва.',
        'Отзыв успешно удалён': 'Отзыв успешно удалён',
        'Ошибка при удалении отзыва.': 'Ошибка при удалении отзыва.',
        'Профиль успешно обновлен.': 'Профиль успешно обновлен.',
        'Ошибка при обновлении профиля.': 'Ошибка при обновлении профиля.',
        'Карта успешно удалена': 'Карта успешно удалена',
        'Ошибка при удалении карты.': 'Ошибка при удалении карты.',
        'Пароли не совпадают': 'Пароли не совпадают',
        'Этот email уже зарегистрирован': 'Этот email уже зарегистрирован',
        'Этот номер уже зарегистрирован': 'Этот номер уже зарегистрирован',
        'Пользователь с таким именем уже существует': 'Пользователь с таким именем уже существует',
        'Пользователь с таким email уже существует': 'Пользователь с таким email уже существует',
        'Пользователь с таким номером телефона уже существует': 'Пользователь с таким номером телефона уже существует',
        'Турагент успешно создан': 'Турагент успешно создан',
        'Ошибка при создании турагента.': 'Ошибка при создании турагента.',
        'Данные турагента успешно обновлены': 'Данные турагента успешно обновлены',
        'Ошибка при обновлении турагента.': 'Ошибка при обновлении турагента.',
        'Сетевая ошибка': 'Сетевая ошибка',
        'Не удалось связаться с сервером. Попробуйте ещё раз.': 'Не удалось связаться с сервером. Попробуйте ещё раз.',
        'Вы успешно вошли в систему': 'Вы успешно вошли в систему',
        'Отмена': 'Отмена',
        'Сохранить': 'Сохранить',
        'Оценка:': 'Оценка:'
    },
    'kk': {
        'Успешно!': 'Сәтті!',
        'Успешно': 'Сәтті',
        'Оценка:': 'Баға:',
        'Ошибка!': 'Қате!',
        'Ошибка': 'Қате',
        'Отмена': 'Бас тарту',
        'Сохранить': 'Сақтау',
        'Неверное имя пользователя или пароль': 'Қате пайдаланушы аты немесе құпия сөз',
        'Произошла ошибка при входе в систему': 'Жүйеге кіру кезінде қате орын алды',
        'Вы успешно зарегистрировались, вы можете войти в систему': 'Сіз сәтті тіркелдіңіз, жүйеге кіре аласыз',
        'Ошибка регистрации!': 'Тіркеу қатесі!',
        'Пожалуйста, проверьте введенные данные': 'Енгізілген деректерді тексеріңіз',
        'Произошла ошибка при регистрации': 'Тіркеу кезінде қате орын алды',
        'Выберите дату': 'Күнді таңдаңыз',
        'Пожалуйста, выберите дату экскурсии.': 'Экскурсия күнін таңдаңыз.',
        'Ошибка проверки карты': 'Картаны тексеру қатесі',
        'Номер карты некорректен. Пожалуйста, проверьте и повторите попытку.': 'Карта нөмірі дұрыс емес. Тексеріп, қайталап көріңіз.',
        'Срок действия карты истёк или некорректен.': 'Картаның жарамдылық мерзімі өтіп кеткен немесе дұрыс емес.',
        'CVC некорректен.': 'CVC дұрыс емес.',
        'Имя владельца карты некорректно.': 'Карта иесінің аты дұрыс емес.',
        'Оплата прошла успешно. Бронирование выполнено.': 'Төлем сәтті өтті. Брондау аяқталды.',
        'Оплата успешна': 'Төлем сәтті',
        'Невозможно создать экскурсию без изображений.': 'Суретсіз экскурсия жасау мүмкін емес.',
        'Данные экскурсии успешно сохранены!': 'Экскурсия деректері сәтті сақталды!',
        'Ошибка сохранения экскурсии.': 'Экскурсияны сақтау қатесі.',
        'Экскурсия успешно обновлена!': 'Экскурсия сәтті жаңартылды!',
        'Ошибка при обновлении экскурсии.': 'Экскурсияны жаңарту кезінде қате.',
        'Экскурсия успешно удалена!': 'Экскурсия сәтті жойылды!',
        'Ошибка при удалении экскурсии.': 'Экскурсияны жою кезінде қате.',
        'Сообщение успешно отправлено!': 'Хабарлама сәтті жіберілді!',
        'Ошибка при отправке сообщения.': 'Хабарламаны жіберу кезінде қате.',
        'Отзыв успешно добавлен!': 'Пікір сәтті қосылды!',
        'Ошибка при добавлении отзыва.': 'Пікірді қосу кезінде қате.',
        'Отзыв успешно обновлен!': 'Пікір сәтті жаңартылды!',
        'Ошибка при обновлении отзыва.': 'Пікірді жаңарту кезінде қате.',
        'Отзыв успешно удален!': 'Пікір сәтті жойылды!',
        'Ошибка при удалении отзыва.': 'Пікірді жою кезінде қате.',
        'Профиль успешно обновлен!': 'Профиль сәтті жаңартылды!',
        'Ошибка при обновлении профиля.': 'Профильді жаңарту кезінде қате.',
        'Карта успешно удалена!': 'Карта сәтті жойылды!',
        'Ошибка при удалении карты.': 'Картаны жою кезінде қате.',
        'Пароли не совпадают.': 'Құпия сөздер сәйкес келмейді.',
        'Этот email уже зарегистрирован.': 'Бұл email тіркелген.',
        'Этот номер телефона уже зарегистрирован.': 'Бұл телефон нөмірі тіркелген.',
        'Пользователь с таким именем уже существует.': 'Бұл атпен пайдаланушы бар.',
        'Пользователь с таким email уже существует.': 'Бұл email-мен пайдаланушы бар.',
        'Пользователь с таким номером телефона уже существует.': 'Бұл телефон нөмірімен пайдаланушы бар.',
        'Турагент успешно создан!': 'Турагент сәтті жасалды!',
        'Ошибка при создании турагента.': 'Турагентті жасау кезінде қате.',
        'Данные турагента обновлены': 'Турагент деректері сәтті жаңартылды!',
        'Ошибка при обновлении турагента.': 'Турагентті жаңарту кезінде қате.',
        'Не удалось получить сохранённую карту.': 'Сақталған картаны алу мүмкін болмады.',
        'Некорректная стоимость билетов. Попробуйте ещё раз.': 'Билеттердің құны дұрыс емес. Қайталап көріңіз.',
        'Выберите дату': 'Күнді таңдаңыз',
        'Пожалуйста, выберите дату экскурсии.': 'Экскурсия күнін таңдаңыз.',
        'Ошибка проверки карты': 'Картаны тексеру қатесі',
        'Номер карты некорректен. Пожалуйста, проверьте введённые данные.': 'Карта нөірі дұрыс емес. Енгізілген деректерді тексеріңіз.',
        'Срок действия карты некорректен. Используйте формат ММ/ГГ.': 'Картаның жарамдылық мерзімі дұрыс емес. АА/ЖЖ форматын пайдаланыңыз.',
        'Месяц окончания карты некорректен.': 'Картаның жарамдылық мерзімінің айы дұрыс емес.',
        'Срок действия карты истёк.': 'Картаның жарамдылық мерзімі өтіп кетті.',
        'CVC-код некорректен.': 'CVC code is incorrect.',
        'Имя владельца карты некорректно.': 'Cardholder name is incorrect.',
        'Произошла ошибка при обработке оплаты. Попробуйте ещё раз.': 'An error occurred while processing payment. Please try again.',
        'Оплата наличными будет подтверждена гидом при встрече.': 'Cash payment will be confirmed by the guide upon meeting.',
        'Ваш заказ на оплату %s принят к обработке. (Это демонстрация)': 'Your payment order for %s has been accepted for processing. (This is a demo)',
        'Ваш заказ принят к обработке.': 'Your order has been processed.',
        'Дата помечена для удаления': 'Күн жоюға белгіленді',
        'Изменения вступят в силу после сохранения формы': 'Өзгерістер форманы сақтағаннан кейін күшіне енеді',
        'Отменено': 'Жойылды',
        'Дата не будет удалена': 'Күн жойылмайды',
        'Обработка': 'Өңдеу',
        'Сохранение изменений...': 'Өзгерістерді сақтау...',
        'Турагент успешно создан': 'Турагент сәтті жасалды',
        'Произошла ошибка при создании турагента': 'Турагентті жасау кезінде қате орын алды',
        'Произошла ошибка при обработке запроса.': 'Сұранысты өңдеу кезінде қате орын алды.',
        'Произошла ошибка при загрузке данных.': 'Деректерді жүктеу кезінде қате орын алды.',
        'Ошибка сервера': 'Сервер қатесі',
        'Успешно добавлено в корзину': 'Себетке сәтті қосылды',
        'Ошибка при добавлении в корзину': 'Себетке қосу кезінде қате',
        'Не удалось добавить товар в корзину.': 'Тауарды себетке қосу мүмкін болмады.',
        'Успешно удалено из корзины': 'Себеттен сәтті жойылды',
        'Ошибка при удалении из корзины': 'Себеттен жою кезінде қате',
        'Не удалось удалить товар из корзины.': 'Тауарды себеттен жою мүмкін болмады.',
        'Ошибка обновления': 'Жаңарту қатесі',
        'Не удалось обновить количество товара в корзине.': 'Себеттегі тауар санын жаңарту мүмкін болмады.',
        'Корзина успешно очищена': 'Себет сәтті тазартылды',
        'Ошибка при очистке корзины': 'Себетті тазарту кезінде қате',
        'Не удалось очистить корзину.': 'Себетті тазарту мүмкін болмады.',
        'Товар уже в корзине': 'Тауар қазірдің өзінде себетте',
        'Этот товар уже добавлен в вашу корзину.': 'Бұл тауар сіздің себетіңізге қазірдің өзінде қосылған.',
        'Спасибо за отзыв!': 'Пікіріңізге рахмет!',
        'Ваш отзыв был успешно отправлен.': 'Сіздің пікіріңіз сәтті жіберілді.',
        'Не удалось отправить отзыв.': 'Пікірді жіберу мүмкін болмады.',
        'Произошла ошибка при отправке отзыва.': 'Пікірді жіберу кезінде қате орын алды.',
        'Комментарий добавлен': 'Түсініктеме қосылды',
        'Ваш комментарий был успешно добавлен.': 'Сіздің түсініктемеңіз сәтті қосылды.',
        'Ошибка добавления комментария': 'Түсініктеме қосу қатесі',
        'Не удалось добавить комментарий.': 'Түсініктеме қосу мүмкін болмады.',
        'Комментарий удален': 'Түсініктеме жойылды',
        'Ваш комментарий был успешно удален.': 'Сіздің түсініктемеңіз сәтті жойылды.',
        'Ошибка удаления комментария': 'Түсініктеме жою қатесі',
        'Не удалось удалить комментарий.': 'Түсініктемені жою мүмкін болмады.',
        'Вы успешно вошли в систему': 'Сіз сәтті кірдіңіз'
    }
};

function getCurrentLanguage() {
    // Попробуйте определить язык из атрибута lang элемента <html>
    const htmlLang = document.documentElement.lang;
    if (htmlLang && translations[htmlLang]) {
        return htmlLang;
    }
    // Если атрибут lang не установлен или не найден в переводах, используйте 'ru' по умолчанию
    return 'ru';
}

function getTranslatedText(key) {
    const lang = getCurrentLanguage();
    return translations[lang] && translations[lang][key] ? translations[lang][key] : key;
}

// Функция для отображения всплывающего уведомления
function showToast(type, title, message, duration = 5000) {
    // Отладочное сообщение: Проверяем атрибут lang элемента <html>
    console.log('HTML lang attribute:', document.documentElement.lang);

    // Отладочное сообщение: Проверяем текущий язык, определенный функцией getCurrentLanguage
    const currentDetectedLanguage = getCurrentLanguage();
    console.log('Detected language for translation:', currentDetectedLanguage);

    // Переводим заголовок и сообщение
    const translatedTitle = getTranslatedText(title);
    const translatedMessage = getTranslatedText(message);

    // Отладочное сообщение: Показываем исходные и переведенные заголовки/сообщения
    console.log('Original Title:', title, 'Translated Title:', translatedTitle);
    console.log('Original Message:', message, 'Translated Message:', translatedMessage);

    // Создаем контейнер для тостов, если он не существует
    let toastContainer = document.getElementById('toastContainer');
    if (!toastContainer) {
        toastContainer = document.createElement('div');
        toastContainer.id = 'toastContainer';
        toastContainer.className = 'toast-container';
        document.body.appendChild(toastContainer);
    }
    
    // Создаем элемент уведомления
    const toast = document.createElement('div');
    toast.className = `toast toast-${type}`;
    
    // Определяем соответствующую иконку
    let iconClass = 'fa-info-circle';
    if (type === 'success') {
        iconClass = 'fa-check-circle';
    } else if (type === 'error') {
        iconClass = 'fa-exclamation-circle';
    } else if (type === 'warning') {
        iconClass = 'fa-exclamation-triangle';
    }
    
    // Создаем содержимое уведомления
    toast.innerHTML = `
        <div class="toast-icon">
            <i class="fas ${iconClass}"></i>
        </div>
        <div class="toast-content">
            <div class="toast-title">${translatedTitle}</div>
            <div class="toast-body">${translatedMessage}</div>
        </div>
        <button class="toast-close" onclick="this.parentElement.remove()">
            <i class="fas fa-times"></i>
        </button>
        <div class="toast-progress"></div>
    `;
    
    // Добавляем уведомление в контейнер
    toastContainer.appendChild(toast);
    
    // Показываем уведомление с анимацией
    setTimeout(() => {
        toast.classList.add('show');
        
        // Запускаем прогресс-бар
        const progressBar = toast.querySelector('.toast-progress');
        progressBar.style.width = '100%';
        progressBar.style.transitionDuration = `${duration}ms`;
        
        // Автоматически удаляем уведомление после указанного времени
        setTimeout(() => {
            toast.classList.remove('show');
            setTimeout(() => {
                toast.remove();
            }, 500);
        }, duration);
    }, 10);
} 